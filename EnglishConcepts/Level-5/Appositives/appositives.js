let appositivesQuiz = [
  {
    question:
      "Select the appositive in this sentence: 'Her cat, a large Maine Coon, is very friendly.'",
    options: {
      A: "Her cat",
      B: "A large Maine Coon",
      C: "Is very friendly",
      D: "Her cat, a large Maine Coon",
    },
    correctAnswer: "B",
    explanation:
      "The appositive 'a large Maine Coon' provides more information about 'Her cat' and is separated by commas.",
  },
  {
    question: "Which sentence includes an appositive modifying 'the city'?",
    options: {
      A: "New York, a bustling metropolis, is known for its landmarks.",
      B: "New York which is a bustling metropolis is known for its landmarks.",
      C: "New York the bustling metropolis is known for its landmarks.",
      D: "New York, which is a bustling metropolis, is known for its landmarks.",
    },
    correctAnswer: "A",
    explanation:
      "The appositive 'a bustling metropolis' provides extra information about 'New York,' set off by commas.",
  },
  {
    question:
      "Identify the appositive in the sentence: 'His car, a sleek convertible, is parked outside.'",
    options: {
      A: "His car",
      B: "A sleek convertible",
      C: "Is parked outside",
      D: "His car, a sleek convertible",
    },
    correctAnswer: "B",
    explanation:
      "The appositive 'a sleek convertible' renames 'His car' and adds descriptive detail.",
  },
  {
    question: "Which of the following sentences uses an appositive correctly?",
    options: {
      A: "The movie, a thrilling action film, was a box office hit.",
      B: "The movie which is a thrilling action film was a box office hit.",
      C: "The movie a thrilling action film was a box office hit.",
      D: "The movie, that is a thrilling action film, was a box office hit.",
    },
    correctAnswer: "A",
    explanation:
      "The appositive 'a thrilling action film' provides additional information about 'The movie,' separated by commas.",
  },
  {
    question:
      "Select the appositive in this sentence: 'My aunt, a talented chef, is hosting the dinner party.'",
    options: {
      A: "My aunt",
      B: "A talented chef",
      C: "Is hosting the dinner party",
      D: "My aunt, a talented chef",
    },
    correctAnswer: "B",
    explanation:
      "The appositive 'a talented chef' gives more information about 'My aunt' and is set off by commas.",
  },
  {
    question: "Which sentence contains an appositive modifying 'the novel'?",
    options: {
      A: "The novel, a classic piece of literature, was recommended by my professor.",
      B: "The novel that was a classic piece of literature was recommended by my professor.",
      C: "The novel a classic piece of literature was recommended by my professor.",
      D: "The novel, which is a classic piece of literature, was recommended by my professor.",
    },
    correctAnswer: "A",
    explanation:
      "The appositive 'a classic piece of literature' provides extra detail about 'The novel' and is separated by commas.",
  },
  {
    question:
      "Identify the appositive in the following sentence: 'Her dog, a friendly golden retriever, loves to play fetch.'",
    options: {
      A: "Her dog",
      B: "A friendly golden retriever",
      C: "Loves to play fetch",
      D: "Her dog, a friendly golden retriever",
    },
    correctAnswer: "B",
    explanation:
      "The appositive 'a friendly golden retriever' renames 'Her dog' and provides additional information.",
  },
  {
    question: "Which sentence includes an appositive modifying 'the artist'?",
    options: {
      A: "The artist, a renowned painter, will be giving a lecture.",
      B: "The artist who is a renowned painter will be giving a lecture.",
      C: "The artist a renowned painter will be giving a lecture.",
      D: "The artist, who is a renowned painter, will be giving a lecture.",
    },
    correctAnswer: "A",
    explanation:
      "The appositive 'a renowned painter' provides extra information about 'The artist' and is set off by commas.",
  },
  {
    question:
      "Select the appositive in this sentence: 'The restaurant, a popular spot for locals, is always busy.'",
    options: {
      A: "The restaurant",
      B: "A popular spot for locals",
      C: "Is always busy",
      D: "The restaurant, a popular spot for locals",
    },
    correctAnswer: "B",
    explanation:
      "The appositive 'a popular spot for locals' adds additional information about 'The restaurant' and is separated by commas.",
  },
  {
    question: "Which sentence contains an appositive modifying 'the musician'?",
    options: {
      A: "The musician, a talented jazz player, performed at the event.",
      B: "The musician who was a talented jazz player performed at the event.",
      C: "The musician a talented jazz player performed at the event.",
      D: "The musician, that was a talented jazz player, performed at the event.",
    },
    correctAnswer: "A",
    explanation:
      "The appositive 'a talented jazz player' provides extra information about 'The musician,' separated by commas.",
  },
  {
    question:
      "Identify the appositive in this sentence: 'The book, a gripping novel, kept me up all night.'",
    options: {
      A: "The book",
      B: "A gripping novel",
      C: "Kept me up all night",
      D: "The book, a gripping novel",
    },
    correctAnswer: "B",
    explanation:
      "The appositive 'a gripping novel' renames 'The book' and adds descriptive detail.",
  },
  {
    question:
      "Which sentence includes an appositive modifying 'the scientist'?",
    options: {
      A: "The scientist, a leading expert in her field, received an award.",
      B: "The scientist who is a leading expert in her field received an award.",
      C: "The scientist a leading expert in her field received an award.",
      D: "The scientist, that is a leading expert in her field, received an award.",
    },
    correctAnswer: "A",
    explanation:
      "The appositive 'a leading expert in her field' provides additional information about 'The scientist' and is separated by commas.",
  },
  {
    question:
      "Select the appositive in the following sentence: 'The lake, a beautiful and serene spot, is popular among tourists.'",
    options: {
      A: "The lake",
      B: "A beautiful and serene spot",
      C: "Is popular among tourists",
      D: "The lake, a beautiful and serene spot",
    },
    correctAnswer: "B",
    explanation:
      "The appositive 'a beautiful and serene spot' adds extra detail about 'The lake' and is separated by commas.",
  },
  {
    question: "Which sentence contains an appositive modifying 'the project'?",
    options: {
      A: "The project, a collaborative effort between teams, was completed on time.",
      B: "The project that was a collaborative effort between teams was completed on time.",
      C: "The project a collaborative effort between teams was completed on time.",
      D: "The project, that was a collaborative effort between teams, was completed on time.",
    },
    correctAnswer: "A",
    explanation:
      "The appositive 'a collaborative effort between teams' provides extra information about 'The project,' set off by commas.",
  },
  {
    question:
      "Identify the appositive in the sentence: 'The award, a prestigious honor, was presented to the winner.'",
    options: {
      A: "The award",
      B: "A prestigious honor",
      C: "Was presented to the winner",
      D: "The award, a prestigious honor",
    },
    correctAnswer: "B",
    explanation:
      "The appositive 'a prestigious honor' renames 'The award' and adds additional detail.",
  },
];

let quiz_container = document.getElementById("quizContainer");
let result_div = document.getElementById("result");
let result_container = document.getElementById("resultText"); // Correctly targets the #resultText element
let submit_quiz = document.getElementById("submit");
let reset_quiz = document.getElementById("reset");

// Shuffle function for randomizing questions
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

shuffle(appositivesQuiz);

// Display questions dynamically
function display_questions() {
  appositivesQuiz.forEach((element, index) => {
    let questionNumber = index + 1;
    let question_div = document.createElement("div");
    question_div.id = "questionsDiv";

    question_div.innerHTML = `<h2 id="questionNumberAndQuestion">${questionNumber}. ${element.question}</h2>`;

    quiz_container.appendChild(question_div);
    let options_div = document.createElement("div");
    options_div.id = "optionsDiv";

    for (const [key, value] of Object.entries(element.options)) {
      let options_inner_div = document.createElement("div");
      options_inner_div.id = "optionsInnerDiv";
      let radio_button = document.createElement("input");
      radio_button.type = "radio";
      radio_button.name = `question${index}`;
      radio_button.id = `radioButton-${index}-${key}`;
      radio_button.value = value;
      let label = document.createElement("label");
      label.textContent = `${key}: ${value}`;

      options_inner_div.appendChild(radio_button);
      question_div.appendChild(options_div);
      options_inner_div.appendChild(label);
      options_div.appendChild(options_inner_div);
    }
    let explanation = document.createElement("div");
    explanation.classList = "explanation";

    explanation.style.display = "none";
    question_div.appendChild(explanation);
  });
}
display_questions();

// Submit quiz and calculate score
submit_quiz.addEventListener("click", function () {
  let score = 0;
  let questions = appositivesQuiz.length;
  result_container.innerHTML = ""; // Clear previous results

  appositivesQuiz.forEach((element, index) => {
    let radio_button = document.querySelector(
      `input[name="question${index}"]:checked`
    );

    let explanation = document.querySelectorAll(".explanation")[index];
    explanation.style.display = "block";

    if (radio_button) {
      if (radio_button.value === element.correctAnswer) {
        score++;
        explanation.style.color = "green";
        explanation.innerHTML = `<p>Correct! - "${element.correctAnswer}" is the right answer</p><p>Explanation: ${element.explanation}</p>`;
      } else {
        explanation.style.color = "red";
        explanation.innerHTML = `<p>Incorrect! - "${element.correctAnswer}" is the right answer</p><p>Explanation: ${element.explanation}<p/>`;
      }
    } else {
      explanation.innerHTML = `<p>No Answer Selected</p><p>The correct answer is: ${element.correctAnswer}<p/><p>Explanation: ${element.explanation}</p>`;
    }
  });

  result_container.textContent = `Your score is: ${score} out of ${questions}`;
  result_div.style.display = "block"; // Ensure result div is displayed
});

// Reset quiz functionality
reset_quiz.addEventListener("click", function () {
  // Clear all radio button selections
  document.querySelectorAll("input[type=radio]").forEach((element) => {
    element.checked = false;
  });

  // Hide all explanations and clear their content
  document.querySelectorAll(".explanation").forEach((element) => {
    element.style.display = "none";
    element.innerHTML = "";
  });

  // Hide the result container and clear its content
  result_div.style.display = "none";
  result_container.innerHTML = ""; // Clear the result text content
});
