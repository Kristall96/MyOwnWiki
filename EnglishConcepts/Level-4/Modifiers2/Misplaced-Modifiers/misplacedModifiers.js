let misplacedModifiersQuiz = [
  {
    question:
      "Correct this sentence: 'Wearing a red dress, the party was enjoyed by everyone.'",
    options: {
      A: "Wearing a red dress, she enjoyed the party.",
      B: "The party was enjoyed by everyone wearing a red dress.",
      C: "Wearing a red dress, everyone enjoyed the party.",
      D: "The party enjoyed everyone wearing a red dress.",
    },
    correctAnswer: "A",
    explanation:
      "The corrected sentence clarifies that 'she' was wearing a red dress and enjoyed the party.",
  },
  {
    question:
      "How would you fix the sentence: 'He almost gave a presentation to the whole company yesterday.'",
    options: {
      A: "He gave a presentation to the whole company yesterday.",
      B: "He almost gave a presentation to the company yesterday.",
      C: "He gave almost a presentation to the whole company yesterday.",
      D: "He gave a presentation almost to the whole company yesterday.",
    },
    correctAnswer: "B",
    explanation:
      "The corrected sentence removes the ambiguity by clearly stating that he nearly gave the presentation.",
  },
  {
    question:
      "Identify and correct the misplaced modifier in: 'The man spoke to the woman in a suit at the conference.'",
    options: {
      A: "The man in a suit spoke to the woman at the conference.",
      B: "The man spoke in a suit to the woman at the conference.",
      C: "The man spoke to the woman at the conference in a suit.",
      D: "The man in a suit spoke at the conference to the woman.",
    },
    correctAnswer: "A",
    explanation:
      "The corrected sentence clarifies that the man was wearing a suit and spoke to the woman.",
  },
  {
    question:
      "Fix this misplaced modifier: 'She saw the dog walking in the park with a telescope.'",
    options: {
      A: "Using a telescope, she saw the dog walking in the park.",
      B: "She saw the dog, which was walking in the park, with a telescope.",
      C: "Walking in the park, she saw the dog with a telescope.",
      D: "She saw the dog with a telescope walking in the park.",
    },
    correctAnswer: "A",
    explanation:
      "The corrected sentence clarifies that she used a telescope to see the dog walking in the park.",
  },
  {
    question:
      "What’s wrong with this sentence: 'The girl drove the car to school almost every day.'?",
    options: {
      A: "The modifier 'almost' is misplaced",
      B: "The verb tense is incorrect",
      C: "The subject is unclear",
      D: "There’s no issue",
    },
    correctAnswer: "A",
    explanation:
      "The sentence creates confusion about the frequency of driving; 'almost every day' should be clearly stated.",
  },
  {
    question:
      "Which correction resolves the misplaced modifier: 'He read the book lying on the bed.'?",
    options: {
      A: "He lying on the bed read the book.",
      B: "He read the book while lying on the bed.",
      C: "Lying on the bed, he read the book.",
      D: "He lying on the bed read the book.",
    },
    correctAnswer: "C",
    explanation:
      "The corrected sentence clarifies that 'he' was lying on the bed while reading the book.",
  },
  {
    question:
      "Identify and correct the misplaced modifier: 'The chef served a meal to the guests cooked with fresh ingredients.'",
    options: {
      A: "The chef served the guests a meal cooked with fresh ingredients.",
      B: "The chef served the meal cooked with fresh ingredients to the guests.",
      C: "The chef served to the guests a meal cooked with fresh ingredients.",
      D: "The chef cooked with fresh ingredients served a meal to the guests.",
    },
    correctAnswer: "A",
    explanation:
      "The corrected sentence clarifies that the meal was cooked with fresh ingredients and served to the guests.",
  },
  {
    question:
      "How would you fix this sentence: 'Walking quickly through the door, the vase fell.'",
    options: {
      A: "Walking quickly through the door, I knocked the vase over.",
      B: "The vase fell walking quickly through the door.",
      C: "Walking quickly through the door, the vase fell over.",
      D: "The vase fell while walking quickly through the door.",
    },
    correctAnswer: "A",
    explanation:
      "The corrected sentence specifies that 'I' was walking quickly and knocked the vase over.",
  },
  {
    question:
      "Correct the misplaced modifier: 'The dog barked loudly at the neighbors in the yard.'",
    options: {
      A: "The dog, in the yard, barked loudly at the neighbors.",
      B: "In the yard, the dog barked loudly at the neighbors.",
      C: "The dog barked loudly in the yard at the neighbors.",
      D: "The dog barked at the neighbors loudly in the yard.",
    },
    correctAnswer: "B",
    explanation:
      "The corrected sentence makes it clear that the dog was in the yard and barked loudly at the neighbors.",
  },
  {
    question:
      "What’s the issue with this sentence: 'She nearly lost her wallet on the trip to Paris.'?",
    options: {
      A: "Misplaced modifier",
      B: "Verb tense",
      C: "Subject clarity",
      D: "There’s no issue",
    },
    correctAnswer: "A",
    explanation:
      "The modifier 'nearly' is misplaced and creates ambiguity about whether she almost lost the wallet.",
  },
  {
    question:
      "Which correction fixes the misplaced modifier: 'He gave a speech to the audience about his travels in the conference.'?",
    options: {
      A: "He gave a speech about his travels to the audience in the conference.",
      B: "He gave a speech to the audience in the conference about his travels.",
      C: "He gave a speech in the conference about his travels to the audience.",
      D: "He gave a speech about his travels in the conference to the audience.",
    },
    correctAnswer: "B",
    explanation:
      "The corrected sentence clarifies that he spoke to the audience at the conference about his travels.",
  },
  {
    question:
      "Identify and correct the misplaced modifier: 'Covered in chocolate, I ate the strawberries.'",
    options: {
      A: "I ate the strawberries covered in chocolate.",
      B: "Covered in chocolate, the strawberries were eaten by me.",
      C: "I, covered in chocolate, ate the strawberries.",
      D: "Covered in chocolate, the strawberries I ate.",
    },
    correctAnswer: "A",
    explanation:
      "The corrected sentence makes it clear that the strawberries were covered in chocolate and that 'I' ate them.",
  },
  {
    question:
      "How would you correct this sentence: 'The waiter brought the order for the table that was delicious.'",
    options: {
      A: "The waiter brought the order that was delicious for the table.",
      B: "The waiter brought the delicious order for the table.",
      C: "For the table, the waiter brought the order that was delicious.",
      D: "The waiter brought the table the order that was delicious.",
    },
    correctAnswer: "B",
    explanation:
      "The corrected sentence clarifies that the order (not the table) was delicious.",
  },
  {
    question:
      "Which sentence resolves the misplaced modifier: 'She read the novel from the library during the flight.'?",
    options: {
      A: "During the flight, she read the novel from the library.",
      B: "She read the novel from the library during the flight.",
      C: "The novel from the library was read by her during the flight.",
      D: "She read during the flight the novel from the library.",
    },
    correctAnswer: "A",
    explanation:
      "The corrected sentence specifies that she was reading the novel from the library during the flight.",
  },
  {
    question:
      "Identify and correct the misplaced modifier: 'The teacher gave the students homework who were attentive.'",
    options: {
      A: "The teacher gave homework to the students who were attentive.",
      B: "The teacher gave homework who were attentive to the students.",
      C: "The teacher gave the attentive students homework.",
      D: "The teacher gave homework to students who were attentive.",
    },
    correctAnswer: "A",
    explanation:
      "The corrected sentence clarifies that the homework was given to the attentive students.",
  },
];

let quiz_container = document.getElementById("quizContainer");
let result_div = document.getElementById("result");
let result_container = document.getElementById("resultText"); // Correctly targets the #resultText element
let submit_quiz = document.getElementById("submit");
let reset_quiz = document.getElementById("reset");

// Shuffle function for randomizing questions
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

shuffle(misplacedModifiersQuiz);

// Display questions dynamically
function display_questions() {
  misplacedModifiersQuiz.forEach((element, index) => {
    let questionNumber = index + 1;
    let question_div = document.createElement("div");
    question_div.id = "questionsDiv";

    question_div.innerHTML = `<h2 id="questionNumberAndQuestion">${questionNumber}. ${element.question}</h2>`;

    quiz_container.appendChild(question_div);
    let options_div = document.createElement("div");
    options_div.id = "optionsDiv";

    for (const [key, value] of Object.entries(element.options)) {
      let options_inner_div = document.createElement("div");
      options_inner_div.id = "optionsInnerDiv";
      let radio_button = document.createElement("input");
      radio_button.type = "radio";
      radio_button.name = `question${index}`;
      radio_button.id = `radioButton-${index}-${key}`;
      radio_button.value = value;
      let label = document.createElement("label");
      label.textContent = `${key}: ${value}`;

      options_inner_div.appendChild(radio_button);
      question_div.appendChild(options_div);
      options_inner_div.appendChild(label);
      options_div.appendChild(options_inner_div);
    }
    let explanation = document.createElement("div");
    explanation.classList = "explanation";

    explanation.style.display = "none";
    question_div.appendChild(explanation);
  });
}
display_questions();

// Submit quiz and calculate score
submit_quiz.addEventListener("click", function () {
  let score = 0;
  let questions = misplacedModifiersQuiz.length;
  result_container.innerHTML = ""; // Clear previous results

  misplacedModifiersQuiz.forEach((element, index) => {
    let radio_button = document.querySelector(
      `input[name="question${index}"]:checked`
    );

    let explanation = document.querySelectorAll(".explanation")[index];
    explanation.style.display = "block";

    if (radio_button) {
      if (radio_button.value === element.correctAnswer) {
        score++;
        explanation.style.color = "green";
        explanation.innerHTML = `<p>Correct! - "${element.correctAnswer}" is the right answer</p><p>Explanation: ${element.explanation}</p>`;
      } else {
        explanation.style.color = "red";
        explanation.innerHTML = `<p>Incorrect! - "${element.correctAnswer}" is the right answer</p><p>Explanation: ${element.explanation}<p/>`;
      }
    } else {
      explanation.innerHTML = `<p>No Answer Selected</p><p>The correct answer is: ${element.correctAnswer}<p/><p>Explanation: ${element.explanation}</p>`;
    }
  });

  result_container.textContent = `Your score is: ${score} out of ${questions}`;
  result_div.style.display = "block"; // Ensure result div is displayed
});

// Reset quiz functionality
reset_quiz.addEventListener("click", function () {
  // Clear all radio button selections
  document.querySelectorAll("input[type=radio]").forEach((element) => {
    element.checked = false;
  });

  // Hide all explanations and clear their content
  document.querySelectorAll(".explanation").forEach((element) => {
    element.style.display = "none";
    element.innerHTML = "";
  });

  // Hide the result container and clear its content
  result_div.style.display = "none";
  result_container.innerHTML = ""; // Clear the result text content
});
