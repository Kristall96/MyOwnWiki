let inversionQuiz = [
  {
    question: "Which sentence correctly uses inversion?",
    options: {
      A: "Never I have seen such a thing.",
      B: "Have I seen such a thing never.",
      C: "Never have I seen such a thing.",
      D: "I have never seen such a thing.",
    },
    correctAnswer: "C",
    explanation:
      "Inversion is used correctly in 'Never have I seen such a thing' to emphasize the rarity of the experience.",
  },
  {
    question: "Choose the sentence with correct word order:",
    options: {
      A: "Seldom do we get such opportunities.",
      B: "Do we seldom get such opportunities.",
      C: "We seldom do get such opportunities.",
      D: "Seldom we do get such opportunities.",
    },
    correctAnswer: "A",
    explanation:
      "The correct inversion is 'Seldom do we get such opportunities,' which emphasizes the infrequency of the opportunity.",
  },
  {
    question: "Which sentence demonstrates proper inversion after 'hardly'?",
    options: {
      A: "Hardly had she started cooking when the guests arrived.",
      B: "Had she hardly started cooking when the guests arrived.",
      C: "She hardly had started cooking when the guests arrived.",
      D: "Had hardly she started cooking when the guests arrived.",
    },
    correctAnswer: "A",
    explanation:
      "The correct use of inversion is 'Hardly had she started cooking when the guests arrived' to show that the action of starting cooking was almost immediately followed by the guests arriving.",
  },
  {
    question: "Select the sentence that uses inversion correctly:",
    options: {
      A: "Only by studying hard will you succeed.",
      B: "By studying hard only will you succeed.",
      C: "Will you succeed by studying hard only.",
      D: "You will only succeed by studying hard.",
    },
    correctAnswer: "A",
    explanation:
      "Inversion is correctly used in 'Only by studying hard will you succeed' to stress the necessity of studying hard for success.",
  },
  {
    question: "Which of these sentences uses inversion after 'rarely'?",
    options: {
      A: "Rarely do we see such a beautiful sight.",
      B: "Do we rarely see such a beautiful sight.",
      C: "We rarely do see such a beautiful sight.",
      D: "Rarely we do see such a beautiful sight.",
    },
    correctAnswer: "A",
    explanation:
      "The correct inversion is 'Rarely do we see such a beautiful sight' to highlight the unusual nature of the sight.",
  },
  {
    question: "Identify the sentence with correct inversion:",
    options: {
      A: "Little did he know that it would be so challenging.",
      B: "Did he little know that it would be so challenging.",
      C: "He little did know that it would be so challenging.",
      D: "He knew little that it would be so challenging.",
    },
    correctAnswer: "A",
    explanation:
      "Inversion is correctly used in 'Little did he know that it would be so challenging' to emphasize how little he anticipated the challenge.",
  },
  {
    question: "Which sentence demonstrates proper inversion after 'no sooner'?",
    options: {
      A: "No sooner had we arrived than it started raining.",
      B: "Had we no sooner arrived than it started raining.",
      C: "We had no sooner arrived than it started raining.",
      D: "No sooner we had arrived than it started raining.",
    },
    correctAnswer: "A",
    explanation:
      "The correct use of inversion is 'No sooner had we arrived than it started raining' to show that the rain started immediately after arrival.",
  },
  {
    question: "Select the correct sentence with inversion:",
    options: {
      A: "Should you need any help, please let me know.",
      B: "You should need any help, please let me know.",
      C: "Should need you any help, please let me know.",
      D: "You need should any help, please let me know.",
    },
    correctAnswer: "A",
    explanation:
      "Inversion is used correctly in 'Should you need any help, please let me know' to offer help in a formal or conditional manner.",
  },
  {
    question: "Which sentence correctly uses inversion with 'only if'?",
    options: {
      A: "Only if the weather improves will the event be held.",
      B: "Will the event be held only if the weather improves.",
      C: "Only if improves the weather will the event be held.",
      D: "The event will be held only if the weather improves.",
    },
    correctAnswer: "A",
    explanation:
      "Inversion is correctly used in 'Only if the weather improves will the event be held' to emphasize that the event depends on the improvement of the weather.",
  },
  {
    question:
      "Choose the sentence with correct inversion after 'hardly' or 'barely':",
    options: {
      A: "Hardly had we left the house when it started to snow.",
      B: "We had hardly left the house when it started to snow.",
      C: "Had we hardly left the house when it started to snow.",
      D: "Hardly we had left the house when it started to snow.",
    },
    correctAnswer: "A",
    explanation:
      "Inversion is correctly used in 'Hardly had we left the house when it started to snow' to indicate that the snow started right after leaving.",
  },
  {
    question: "Which sentence uses inversion correctly after 'never'?",
    options: {
      A: "Never have I seen such dedication.",
      B: "Have I never seen such dedication.",
      C: "Never I have seen such dedication.",
      D: "I have never seen such dedication.",
    },
    correctAnswer: "A",
    explanation:
      "The correct inversion is 'Never have I seen such dedication' to stress the rarity of the observed dedication.",
  },
  {
    question:
      "Identify the sentence that demonstrates proper inversion after 'no matter how':",
    options: {
      A: "No matter how hard you try, will you succeed.",
      B: "No matter how hard will you try, you succeed.",
      C: "No matter how hard you try, you will succeed.",
      D: "Will you succeed no matter how hard you try.",
    },
    correctAnswer: "C",
    explanation:
      "The correct sentence is 'No matter how hard you try, you will succeed,' as inversion is not typically used after 'no matter how'.",
  },
  {
    question:
      "Which sentence correctly demonstrates inversion in a conditional clause?",
    options: {
      A: "Had I known about the traffic, I would have left earlier.",
      B: "I had known about the traffic, I would have left earlier.",
      C: "I would have left earlier, had I known about the traffic.",
      D: "Had known I about the traffic, I would have left earlier.",
    },
    correctAnswer: "A",
    explanation:
      "The correct inversion is 'Had I known about the traffic, I would have left earlier' to express a hypothetical situation.",
  },
  {
    question: "Which sentence uses inversion correctly after 'scarcely'?",
    options: {
      A: "Scarcely had she finished her meal when the waiter arrived.",
      B: "She had scarcely finished her meal when the waiter arrived.",
      C: "Scarcely she had finished her meal when the waiter arrived.",
      D: "Had she scarcely finished her meal when the waiter arrived.",
    },
    correctAnswer: "A",
    explanation:
      "Inversion is correctly used in 'Scarcely had she finished her meal when the waiter arrived' to indicate that the event happened immediately after finishing her meal.",
  },
  {
    question: "Choose the sentence with correct inversion after 'only after':",
    options: {
      A: "Only after the meeting did she realize the importance.",
      B: "She realized the importance only after the meeting.",
      C: "Only after did she realize the importance the meeting.",
      D: "Did she realize the importance only after the meeting.",
    },
    correctAnswer: "A",
    explanation:
      "Inversion is used correctly in 'Only after the meeting did she realize the importance' to stress that the realization happened after the meeting.",
  },
];

let quiz_container = document.getElementById("quizContainer");
let result_div = document.getElementById("result");
let result_container = document.getElementById("resultText"); // Correctly targets the #resultText element
let submit_quiz = document.getElementById("submit");
let reset_quiz = document.getElementById("reset");

// Shuffle function for randomizing questions
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

shuffle(inversionQuiz);

// Display questions dynamically
function display_questions() {
  inversionQuiz.forEach((element, index) => {
    let questionNumber = index + 1;
    let question_div = document.createElement("div");
    question_div.id = "questionsDiv";

    question_div.innerHTML = `<h2 id="questionNumberAndQuestion">${questionNumber}. ${element.question}</h2>`;

    quiz_container.appendChild(question_div);
    let options_div = document.createElement("div");
    options_div.id = "optionsDiv";

    for (const [key, value] of Object.entries(element.options)) {
      let options_inner_div = document.createElement("div");
      options_inner_div.id = "optionsInnerDiv";
      let radio_button = document.createElement("input");
      radio_button.type = "radio";
      radio_button.name = `question${index}`;
      radio_button.id = `radioButton-${index}-${key}`;
      radio_button.value = value;
      let label = document.createElement("label");
      label.textContent = `${key}: ${value}`;

      options_inner_div.appendChild(radio_button);
      question_div.appendChild(options_div);
      options_inner_div.appendChild(label);
      options_div.appendChild(options_inner_div);
    }
    let explanation = document.createElement("div");
    explanation.classList = "explanation";

    explanation.style.display = "none";
    question_div.appendChild(explanation);
  });
}
display_questions();

// Submit quiz and calculate score
submit_quiz.addEventListener("click", function () {
  let score = 0;
  let questions = inversionQuiz.length;
  result_container.innerHTML = ""; // Clear previous results

  inversionQuiz.forEach((element, index) => {
    let radio_button = document.querySelector(
      `input[name="question${index}"]:checked`
    );

    let explanation = document.querySelectorAll(".explanation")[index];
    explanation.style.display = "block";

    if (radio_button) {
      if (radio_button.value === element.correctAnswer) {
        score++;
        explanation.style.color = "green";
        explanation.innerHTML = `<p>Correct! - "${element.correctAnswer}" is the right answer</p><p>Explanation: ${element.explanation}</p>`;
      } else {
        explanation.style.color = "red";
        explanation.innerHTML = `<p>Incorrect! - "${element.correctAnswer}" is the right answer</p><p>Explanation: ${element.explanation}<p/>`;
      }
    } else {
      explanation.innerHTML = `<p>No Answer Selected</p><p>The correct answer is: ${element.correctAnswer}<p/><p>Explanation: ${element.explanation}</p>`;
    }
  });

  result_container.textContent = `Your score is: ${score} out of ${questions}`;
  result_div.style.display = "block"; // Ensure result div is displayed
});

// Reset quiz functionality
reset_quiz.addEventListener("click", function () {
  // Clear all radio button selections
  document.querySelectorAll("input[type=radio]").forEach((element) => {
    element.checked = false;
  });

  // Hide all explanations and clear their content
  document.querySelectorAll(".explanation").forEach((element) => {
    element.style.display = "none";
    element.innerHTML = "";
  });

  // Hide the result container and clear its content
  result_div.style.display = "none";
  result_container.innerHTML = ""; // Clear the result text content
});
