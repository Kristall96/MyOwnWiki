let parallelStructureQuiz = [
  {
    question: `Which sentence is parallel? "He likes to swim, running, and biking."`,
    options: {
      A: "He likes to swim, running, and biking.",
      B: "He likes swimming, running, and biking.",
      C: "He likes to swim, to run, and biking.",
      D: "He likes to swim, running, and to bike.",
    },
    correctAnswer: "He likes swimming, running, and biking.",
    explanation: `All items in the list should be in the same form. Here, "swimming," "running," and "biking" are all gerunds.`,
  },
  {
    question: `Identify the parallel structure: "The report was thorough, detailed, and writing."`,
    options: {
      A: "The report was thorough, detailed, and writing.",
      B: "The report was thorough, detailed, and well-written.",
      C: "The report was thorough, detailed, and writing well.",
      D: "The report was thorough, detail, and writing.",
    },
    correctAnswer: "The report was thorough, detailed, and well-written.",
    explanation: `For correct parallelism, use adjectives or adjective phrases consistently. Here, "thorough," "detailed," and "well-written" are all adjectives.`,
  },
  {
    question: `Choose the sentence with parallel structure: "She wants a vacation that is relaxing, enjoyable, and to be fun."`,
    options: {
      A: "She wants a vacation that is relaxing, enjoyable, and to be fun.",
      B: "She wants a vacation that is relaxing, enjoyable, and fun.",
      C: "She wants a vacation that is relaxing, to enjoy, and fun.",
      D: "She wants a vacation that is relaxing, enjoyable, and will be fun.",
    },
    correctAnswer: "She wants a vacation that is relaxing, enjoyable, and fun.",
    explanation: `Parallel structure requires that all items in a series be in the same form. Here, "relaxing," "enjoyable," and "fun" are all adjectives.`,
  },
  {
    question: `Which sentence has correct parallelism? "She is smart, talented, and works hard."`,
    options: {
      A: "She is smart, talented, and works hard.",
      B: "She is smart, talented, and hard-working.",
      C: "She is smart, working hard, and talented.",
      D: "She is smart, being talented, and working hard.",
    },
    correctAnswer: "She is smart, talented, and hard-working.",
    explanation: `Parallel structure is achieved by using similar forms. Here, "smart," "talented," and "hard-working" are all adjectives describing her qualities.`,
  },
  {
    question: `Identify the sentence with parallel structure: "For the project, we need to analyze data, write reports, and having meetings."`,
    options: {
      A: "For the project, we need to analyze data, write reports, and having meetings.",
      B: "For the project, we need to analyze data, write reports, and hold meetings.",
      C: "For the project, we need to analyze data, writing reports, and hold meetings.",
      D: "For the project, we need to analyze data, to write reports, and to have meetings.",
    },
    correctAnswer:
      "For the project, we need to analyze data, write reports, and hold meetings.",
    explanation: `Parallel structure requires consistency. "Analyze data," "write reports," and "hold meetings" are all actions in the base form.`,
  },
  {
    question: `Which sentence is correctly parallel? "The movie was entertaining, thrilling, and a bit too long."`,
    options: {
      A: "The movie was entertaining, thrilling, and a bit too long.",
      B: "The movie was entertaining, thrilling, and long.",
      C: "The movie was entertaining, thrilling, and it was too long.",
      D: "The movie was entertaining, to thrill, and too long.",
    },
    correctAnswer: "The movie was entertaining, thrilling, and long.",
    explanation: `Parallel structure is achieved by using similar forms. Here, "entertaining," "thrilling," and "long" are all adjectives.`,
  },
  {
    question: `Complete the sentence with parallel structure: "The company values hard work, integrity, and to be punctual."`,
    options: {
      A: "The company values hard work, integrity, and to be punctual.",
      B: "The company values hard work, integrity, and punctuality.",
      C: "The company values hard work, being integrity, and punctual.",
      D: "The company values hard work, integrity, and punctuality.",
    },
    correctAnswer: "The company values hard work, integrity, and punctuality.",
    explanation: `In a list, ensure that all items are in the same grammatical form. Here, "hard work," "integrity," and "punctuality" are all noun phrases.`,
  },
  {
    question: `Which sentence uses parallel structure correctly? "He likes hiking, to swim, and running."`,
    options: {
      A: "He likes hiking, to swim, and running.",
      B: "He likes hiking, swimming, and running.",
      C: "He likes hiking, to swim, and to run.",
      D: "He likes to hike, swim, and running.",
    },
    correctAnswer: "He likes hiking, swimming, and running.",
    explanation: `Parallel structure is achieved by using similar forms. Here, "hiking," "swimming," and "running" are all gerunds.`,
  },
  {
    question: `Choose the sentence with correct parallelism: "For dinner, we had salad, soup, and the main course."`,
    options: {
      A: "For dinner, we had salad, soup, and the main course.",
      B: "For dinner, we had salad, soup, and eating the main course.",
      C: "For dinner, we had salad, soup, and the main dish.",
      D: "For dinner, we had salad, soups, and the main course.",
    },
    correctAnswer: "For dinner, we had salad, soup, and the main course.",
    explanation: `Parallel structure requires similar forms. Here, "salad," "soup," and "the main course" are all items in a list.`,
  },
  {
    question: `Complete the sentence with parallel structure: "The coach praised the team for their effort, their sportsmanship, and being punctual."`,
    options: {
      A: "The coach praised the team for their effort, their sportsmanship, and being punctual.",
      B: "The coach praised the team for their effort, sportsmanship, and punctuality.",
      C: "The coach praised the team for their efforts, sportsmanship, and punctuality.",
      D: "The coach praised the team for their effort, their sportsmanship, and punctuality.",
    },
    correctAnswer:
      "The coach praised the team for their effort, their sportsmanship, and punctuality.",
    explanation: `Ensure that all items in the list are in the same grammatical form. Here, "effort," "sportsmanship," and "punctuality" are all nouns.`,
  },
  {
    question: `Which of the following sentences is parallel? "The book was well-written, engaging, and to be informative."`,
    options: {
      A: "The book was well-written, engaging, and to be informative.",
      B: "The book was well-written, engaging, and informative.",
      C: "The book was well-written, engaging, and to inform.",
      D: "The book was well-written, engaging, and was informative.",
    },
    correctAnswer: "The book was well-written, engaging, and informative.",
    explanation: `Parallel structure requires that all items in the list be in the same form. Here, "well-written," "engaging," and "informative" are all adjectives.`,
  },
  {
    question: `Identify the sentence with correct parallelism: "She prefers reading novels, writing stories, and to draw."`,
    options: {
      A: "She prefers reading novels, writing stories, and to draw.",
      B: "She prefers reading novels, writing stories, and drawing.",
      C: "She prefers read novels, write stories, and draw.",
      D: "She prefers reading novels, to write stories, and drawing.",
    },
    correctAnswer: "She prefers reading novels, writing stories, and drawing.",
    explanation: `Parallel structure is achieved by using similar forms. Here, "reading novels," "writing stories," and "drawing" are all gerunds.`,
  },
  {
    question: `Which sentence demonstrates correct parallel structure? "The manager emphasized the importance of punctuality, teamwork, and to be professional."`,
    options: {
      A: "The manager emphasized the importance of punctuality, teamwork, and to be professional.",
      B: "The manager emphasized the importance of punctuality, teamwork, and professionalism.",
      C: "The manager emphasized punctuality, teamwork, and being professional.",
      D: "The manager emphasized punctuality, teamwork, and to be professional.",
    },
    correctAnswer:
      "The manager emphasized the importance of punctuality, teamwork, and professionalism.",
    explanation: `For parallel structure, all items in the list should match in form. Here, "punctuality," "teamwork," and "professionalism" are all nouns.`,
  },
  {
    question: `Complete the sentence with parallel structure: "They enjoy playing tennis, going hiking, and to swim."`,
    options: {
      A: "They enjoy playing tennis, going hiking, and to swim.",
      B: "They enjoy playing tennis, going hiking, and swimming.",
      C: "They enjoy to play tennis, going hiking, and swim.",
      D: "They enjoy to play tennis, to go hiking, and swimming.",
    },
    correctAnswer: "They enjoy playing tennis, going hiking, and swimming.",
    explanation: `Parallel structure requires that all items in the list be in the same form. Here, "playing tennis," "going hiking," and "swimming" are all gerunds.`,
  },
  {
    question: `Which sentence is correctly parallel? "He is known for his ability to inspire, his creativity, and to lead effectively."`,
    options: {
      A: "He is known for his ability to inspire, his creativity, and to lead effectively.",
      B: "He is known for his ability to inspire, creativity, and leading effectively.",
      C: "He is known for his ability to inspire, his creative, and lead effectively.",
      D: "He is known for his ability to inspire, creativity, and to lead effectively.",
    },
    correctAnswer:
      "He is known for his ability to inspire, his creativity, and to lead effectively.",
    explanation: `Parallel structure is achieved by using similar forms. Here, "ability to inspire," "creativity," and "to lead effectively" are all phrases describing his qualities.`,
  },
];

let quiz_container = document.getElementById("quizContainer");
let result_div = document.getElementById("result");
let result_container = document.getElementById("resultText"); // Correctly targets the #resultText element
let submit_quiz = document.getElementById("submit");
let reset_quiz = document.getElementById("reset");

// Shuffle function for randomizing questions
function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

shuffle(parallelStructureQuiz);

// Display questions dynamically
function display_questions() {
  parallelStructureQuiz.forEach((element, index) => {
    let questionNumber = index + 1;
    let question_div = document.createElement("div");
    question_div.id = "questionsDiv";

    question_div.innerHTML = `<h2 id="questionNumberAndQuestion">${questionNumber}. ${element.question}</h2>`;

    quiz_container.appendChild(question_div);
    let options_div = document.createElement("div");
    options_div.id = "optionsDiv";

    for (const [key, value] of Object.entries(element.options)) {
      let options_inner_div = document.createElement("div");
      options_inner_div.id = "optionsInnerDiv";
      let radio_button = document.createElement("input");
      radio_button.type = "radio";
      radio_button.name = `question${index}`;
      radio_button.id = `radioButton-${index}-${key}`;
      radio_button.value = value;
      let label = document.createElement("label");
      label.textContent = `${key}: ${value}`;

      options_inner_div.appendChild(radio_button);
      question_div.appendChild(options_div);
      options_inner_div.appendChild(label);
      options_div.appendChild(options_inner_div);
    }
    let explanation = document.createElement("div");
    explanation.classList = "explanation";

    explanation.style.display = "none";
    question_div.appendChild(explanation);
  });
}
display_questions();

// Submit quiz and calculate score
submit_quiz.addEventListener("click", function () {
  let score = 0;
  let questions = parallelStructureQuiz.length;
  result_container.innerHTML = ""; // Clear previous results

  parallelStructureQuiz.forEach((element, index) => {
    let radio_button = document.querySelector(
      `input[name="question${index}"]:checked`
    );

    let explanation = document.querySelectorAll(".explanation")[index];
    explanation.style.display = "block";

    if (radio_button) {
      if (radio_button.value === element.correctAnswer) {
        score++;
        explanation.style.color = "green";
        explanation.innerHTML = `<p>Correct! - "${element.correctAnswer}" is the right answer</p><p>Explanation: ${element.explanation}</p>`;
      } else {
        explanation.style.color = "red";
        explanation.innerHTML = `<p>Incorrect! - "${element.correctAnswer}" is the right answer</p><p>Explanation: ${element.explanation}<p/>`;
      }
    } else {
      explanation.innerHTML = `<p>No Answer Selected</p><p>The correct answer is: ${element.correctAnswer}<p/><p>Explanation: ${element.explanation}</p>`;
    }
  });

  result_container.textContent = `Your score is: ${score} out of ${questions}`;
  result_div.style.display = "block"; // Ensure result div is displayed
});

// Reset quiz functionality
reset_quiz.addEventListener("click", function () {
  // Clear all radio button selections
  document.querySelectorAll("input[type=radio]").forEach((element) => {
    element.checked = false;
  });

  // Hide all explanations and clear their content
  document.querySelectorAll(".explanation").forEach((element) => {
    element.style.display = "none";
    element.innerHTML = "";
  });

  // Hide the result container and clear its content
  result_div.style.display = "none";
  result_container.innerHTML = ""; // Clear the result text content
});
